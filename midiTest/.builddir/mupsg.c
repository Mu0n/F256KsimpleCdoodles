#include "D:\F256\llvm-mos\code\miditest\.builddir\trampoline.h"

#include "f256lib.h"
#include "../src/mupsg.h"

const uint8_t psgLow[] = {

0x86, 0x8d,0x87,0x84,0x84,0x87,0x8d,0x84,0x8e,0x8b,0x89,0x89,
0x8b, 0x8e,0x83,0x8a,0x82,0x8b,0x86,0x82,0x8f,0x8d,0x8c,0x8c,
0x8d, 0x8f,0x81,0x85,0x89,0x8d,0x83,0x89,0x8f,0x86,0x8e,0x86,
0x8e, 0x87,0x80,0x8a,0x84,0x8e,0x89,0x84,0x8f,0x8b,0x87,0x83,
0x8f, 0x8b,0x88,0x85,0x82,0x8f,0x8c,0x8a,0x87,0x85,0x83,0x81,
0x8f, 0x8d,0x8c,0x8a};


const uint8_t psgHigh[] = {

0x3f, 0x3b,0x38,0x35,0x32,0x2f,0x2c,0x2a,0x27,0x25,0x23,0x21,
0x1f, 0x1d,0x1c,0x1a,0x19,0x17,0x16,0x15,0x13,0x12,0x11,0x10,
0x0f, 0x0e,0x0e,0x0d,0x0c,0x0b,0x0b,0x0a,0x09,0x09,0x08,0x08,
0x07, 0x07,0x07,0x06,0x06,0x05,0x05,0x05,0x04,0x04,0x04,0x04,
0x03, 0x03,0x03,0x03,0x03,0x02,0x02,0x02,0x02,0x02,0x02,0x02,
0x01, 0x01,0x01,0x01};
void shutPSG()
{
	uint8_t i;
	for(i=1;i<=7;i+=2)
	{
		POKE(PSG_LEFT,  0x9F | (i<<4));
		POKE(PSG_RIGHT, 0x9F | (i<<4));
	}
}
void psgNoteOn(uint8_t chan, uint16_t addr, uint8_t loByte, uint8_t hiByte,uint8_t velo)
{
	POKE(addr,0x90 | chan | (~((velo>>3)))&0x0F); // the formula controls the nybble for tone 0 attenuation. ie a 0xFF here = silence, while 0x00 is max volume. the higher the midi in velocity, the lower this number becomes
	POKE(addr,loByte | chan); //chan is either 0, 2 or 4 in bit
	POKE(addr,hiByte);
}

void psgNoteOff(uint8_t chan,uint16_t addr)
{
	POKE(addr,0x9F | chan);
}

void setMonoPSG()
{
	uint8_t sys1;
	
	sys1=PEEK(PSG_SYS1);
	sys1 = sys1 & 0b11111011;
	POKE(PSG_SYS1,sys1);
}
void setStereoPSG()
{
	uint8_t sys1;
	
	sys1=PEEK(PSG_SYS1);
	sys1 = sys1 & 0b11111111;
	POKE(PSG_SYS1,sys1);
}
